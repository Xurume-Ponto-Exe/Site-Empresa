<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Segurança</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
</head>
<body>

    <div id="notification-container"></div>
    <div class="overlay"></div>
    
    <button id="menu-toggle-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    </button>

    <div class="app-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="assets/mono-pbMarca-Belfort-Engenharia.png" alt="Logo Belfort Engenharia" class="logo-light">
                <img src="assets/mono-brancaMarca-Belfort-Engenharia (1).png" alt="Logo Belfort Engenharia" class="logo-dark">
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="active" onclick="showPage('epi', this)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg> EPIs
                </a>
                <a href="#" onclick="showPage('sistemas', this)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></svg> Sistemas
                </a>
                <a href="#" onclick="showPage('documentos', this)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg> Documentos
                </a>
                <a href="#" onclick="showPage('notificacoes', this)">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg> Notificações
                </a>
            </nav>
            <div class="theme-toggle-container">
                <svg class="theme-icon icon-sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                <button id="btn-dark-mode-toggle"></button>
                <svg class="theme-icon icon-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </div>
        </aside>

        <main class="content">
            <div id="epi-page" class="page-content active">
                <div class="card">
                    <h2 id="epi-form-title">Cadastro de EPI</h2>
                    <div class="form-group"> <label for="descricao-epi">Descrição do EPI</label> <input type="text" id="descricao-epi"> </div>
                    <div class="form-group"> <label for="data-entrega-epi">Data de entrega</label> <input type="date" id="data-entrega-epi"> </div>
                    <div class="form-group"> <label for="tempo-troca">Tempo de troca (dias)</label> <input type="number" id="tempo-troca" inputmode="numeric"> </div>
                    <div class="form-group"> <label for="data-troca">Data da troca</label> <input type="date" id="data-troca"> </div>
                    <div class="btn-group"> <button id="btn-salvar-epi" onclick="salvarEpi()">Cadastrar EPI</button> <button class="btn-secondary" onclick="toggleView('EPIs')">Ver Cadastrados</button> </div>
                    
                    <div id="epis-view-container" class="view-container" style="display:none;">
                        <div class="search-bar form-group">
                            <label for="busca-epi">Buscar EPI</label>
                            <input type="text" id="busca-epi" onkeyup="atualizarVisualizacao('EPIs')" placeholder="Digite a descrição para filtrar...">
                        </div>
                        <div id="epis-cadastrados-view" class="cadastros-view"></div>
                    </div>
                </div>
            </div>
            <div id="sistemas-page" class="page-content">
                 <div class="card">
                    <h2 id="sist-form-title">Cadastro de Sistema</h2>
                    <div class="form-group"> <label for="desc-sistema">Descrição do Sistema</label> <input type="text" id="desc-sistema"> </div>
                    <div class="form-group"> <label for="data-entrega-sistema">Data da entrega da obra</label> <input type="date" id="data-entrega-sistema"> </div>
                    <div class="form-group"> <label for="data-manutencao">Próxima manutenção</label> <input type="date" id="data-manutencao"> </div>
                    <div class="btn-group"> <button id="btn-salvar-sist" onclick="salvarSistema()">Cadastrar Sistema</button> <button class="btn-secondary" onclick="toggleView('Sistemas')">Ver Cadastrados</button> </div>

                    <div id="sistemas-view-container" class="view-container" style="display:none;">
                        <div class="search-bar form-group">
                            <label for="busca-sistemas">Buscar Sistema</label>
                            <input type="text" id="busca-sistemas" onkeyup="atualizarVisualizacao('Sistemas')" placeholder="Digite a descrição para filtrar...">
                        </div>
                        <div id="sistemas-cadastrados-view" class="cadastros-view"></div>
                    </div>
                </div>
            </div>
            <div id="documentos-page" class="page-content">
                <div class="card">
                    <h2>Atualizar Documentos de Sistema</h2>
                    <div class="form-group"> <label for="doc-nome-sistema">Nome do sistema para atualizar</label> <input type="text" id="doc-nome-sistema"> </div>
                    <div class="checkbox-group"> <input type="checkbox" id="art-recebida"> <label for="art-recebida">ART Recebida</label> </div>
                    <div class="checkbox-group"> <input type="checkbox" id="nf-recebida"> <label for="nf-recebida">Nota Fiscal Recebida</label> </div>
                    <div class="btn-group"> <button onclick="marcarEnvioDocumentos()">Atualizar Documentos</button> </div>
                </div>
            </div>
            <div id="notificacoes-page" class="page-content">
                <div class="card">
                    <h2 class="notifications-header">Itens Datados</h2>
                    <div class="notifications-columns">
                        <div class="notification-column">
                            <h3 class="column-title">EPIs</h3>
                            <div id="epi-notifications-list" class="item-list"></div>
                        </div>
                        <div class="notification-column">
                            <h3 class="column-title">Obras (Sistemas)</h3>
                            <div id="sistemas-notifications-list" class="item-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="notification-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Opções de Notificação</h3>
                <button class="close-button" onclick="fecharModalNotificacao()">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong>Item:</strong> <span id="modal-item-descricao"></span></p>
                <p><strong>Vencimento:</strong> <span id="modal-item-data"></span></p>
            </div>
            <div class="modal-actions">
                <button id="modal-btn-email">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                    Email
                </button>
                <button id="modal-btn-whatsapp">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                    WhatsApp
                </button>
            </div>
        </div>
    </div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDLTv8Qw1IFjDnwTi6WQk-FfQuwkI9qdA8",
        authDomain: "gerenciador-belfort.firebaseapp.com",
        projectId: "gerenciador-belfort",
        storageBucket: "gerenciador-belfort.appspot.com",
        messagingSenderId: "173943781751",
        appId: "1:173943781751:web:175ec3ee1505ca5049c972"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const ARQUIVO_EPI = "epis";
    const ARQUIVO_SISTEMA = "sistemas";
    let modoEdicao = { ativo: false, tipo: null, id: null };
    let itemNotificacaoAtual = null;

    function showNotification(message, type = 'info') {
        const container = document.getElementById('notification-container');
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.textContent = message;
        container.appendChild(notification);
        setTimeout(() => notification.remove(), 5000);
    }

    function formatarDataParaSalvar(dataString) {
        if (!dataString) return "";
        const [ano, mes, dia] = dataString.split('-');
        return `${dia}/${mes}/${ano}`;
    }

    function formatarDataParaInput(dataString) {
        if (!dataString) return "";
        const [dia, mes, ano] = dataString.split('/');
        return `${ano}-${mes.padStart(2, '0')}-${dia.padStart(2, '0')}`;
    }

    function getInput(id) { return document.getElementById(id); }

    async function enviarConfirmacaoPorEmail(action, details) {
        try {
            await fetch('/.netlify/functions/send-confirmation', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action, details }),
            });
            showNotification("Notificação por email enviada!", "info");
        } catch (error) {
            console.error('Erro ao enviar email de confirmação:', error);
            showNotification("Falha ao enviar email.", "error");
        }
    }

    async function excluirItem(tipo, id, descricao) {
        const arquivo = tipo === 'EPIs' ? ARQUIVO_EPI : ARQUIVO_SISTEMA;
        const nomeItem = tipo === 'EPIs' ? 'EPI' : 'Sistema';
        
        if (confirm(`Tem certeza que deseja excluir este ${nomeItem}: "${descricao}"?`)) {
            try {
                await db.collection(arquivo).doc(id).delete();
                showNotification(`${nomeItem} excluído com sucesso!`, 'success');
                atualizarVisualizacao(tipo);
            } catch (error) {
                showNotification(`Erro ao excluir o ${nomeItem}.`, 'error');
                console.error("Erro ao excluir: ", error);
            }
        }
    }
    
    async function salvarEpi() {
        try {
            const epi = {
                descricao: getInput('descricao-epi').value,
                data_entrega: formatarDataParaSalvar(getInput('data-entrega-epi').value),
                tempo_troca_dias: parseInt(getInput('tempo-troca').value, 10),
                data_troca: formatarDataParaSalvar(getInput('data-troca').value)
            };
            if (!epi.descricao || !epi.data_entrega || isNaN(epi.tempo_troca_dias) || !epi.data_troca) throw new Error("Preencha todos os campos corretamente.");

            if (modoEdicao.ativo && modoEdicao.tipo === 'EPIs') {
                await db.collection(ARQUIVO_EPI).doc(modoEdicao.id).update(epi);
                showNotification("EPI atualizado com sucesso!", 'success');
            } else {
                await db.collection(ARQUIVO_EPI).add(epi);
                showNotification("EPI cadastrado com sucesso!", 'success');
            }
            
            resetarFormulario('EPIs');
            atualizarVisualizacao('EPIs');
        } catch (e) {
            showNotification(`Erro: ${e.message}`, 'error');
        }
    }

    async function salvarSistema() {
        try {
            const sistema = {
                descricao: getInput('desc-sistema').value,
                data_entrega_obra: formatarDataParaSalvar(getInput('data-entrega-sistema').value),
                data_proxima_manutencao: formatarDataParaSalvar(getInput('data-manutencao').value),
                art_recebida: false,
                nota_fiscal_recebida: false
            };
            if (!sistema.descricao || !sistema.data_entrega_obra || !sistema.data_proxima_manutencao) throw new Error("Preencha todos os campos.");

            if (modoEdicao.ativo && modoEdicao.tipo === 'Sistemas') {
                const docRef = db.collection(ARQUIVO_SISTEMA).doc(modoEdicao.id);
                const docSnap = await docRef.get();
                if (docSnap.exists) {
                    sistema.art_recebida = docSnap.data().art_recebida;
                    sistema.nota_fiscal_recebida = docSnap.data().nota_fiscal_recebida;
                }
                await docRef.update(sistema);
                showNotification("Sistema atualizado!", 'success');
            } else {
                await db.collection(ARQUIVO_SISTEMA).add(sistema);
                showNotification("Sistema cadastrado!", 'success');
            }

            resetarFormulario('Sistemas');
            atualizarVisualizacao('Sistemas');
        } catch (e) {
            showNotification(`Erro: ${e.message}`, 'error');
        }
    }

    async function editarItem(tipo, id) {
        const arquivo = tipo === 'EPIs' ? ARQUIVO_EPI : ARQUIVO_SISTEMA;
        const doc = await db.collection(arquivo).doc(id).get();
        if (!doc.exists) return;
        const item = doc.data();

        modoEdicao = { ativo: true, tipo: tipo, id: id };
        window.scrollTo({ top: 0, behavior: 'smooth' });

        if (tipo === 'EPIs') {
            showPage('epi', document.querySelector('a[onclick*="epi"]'));
            getInput('descricao-epi').value = item.descricao;
            getInput('data-entrega-epi').value = formatarDataParaInput(item.data_entrega);
            getInput('tempo-troca').value = item.tempo_troca_dias;
            getInput('data-troca').value = formatarDataParaInput(item.data_troca);
            getInput('epi-form-title').textContent = "Editando EPI";
            getInput('btn-salvar-epi').textContent = "Salvar Alterações";
        } else {
            showPage('sistemas', document.querySelector('a[onclick*="sistemas"]'));
            getInput('desc-sistema').value = item.descricao;
            getInput('data-entrega-sistema').value = formatarDataParaInput(item.data_entrega_obra);
            getInput('data-manutencao').value = formatarDataParaInput(item.data_proxima_manutencao);
            getInput('sist-form-title').textContent = "Editando Sistema";
            getInput('btn-salvar-sist').textContent = "Salvar Alterações";
        }
    }
    
    function resetarFormulario(tipo) {
        modoEdicao = { ativo: false, tipo: null, id: null };
        if (tipo === 'EPIs') {
            ['descricao-epi', 'data-entrega-epi', 'tempo-troca', 'data-troca'].forEach(id => getInput(id).value = '');
            getInput('epi-form-title').textContent = "Cadastro de EPI";
            getInput('btn-salvar-epi').textContent = "Cadastrar EPI";
        } else {
            ['desc-sistema', 'data-entrega-sistema', 'data-manutencao'].forEach(id => getInput(id).value = '');
            getInput('sist-form-title').textContent = "Cadastro de Sistema";
            getInput('btn-salvar-sist').textContent = "Cadastrar Sistema";
        }
    }

    function toggleView(tipo) {
        const container = getInput(tipo === 'EPIs' ? 'epis-view-container' : 'sistemas-view-container');
        const isVisible = container.style.display === 'block';
        container.style.display = isVisible ? 'none' : 'block';
        if (!isVisible) {
            atualizarVisualizacao(tipo);
        }
    }

    async function atualizarVisualizacao(tipo) {
        const arquivo = tipo === 'EPIs' ? ARQUIVO_EPI : ARQUIVO_SISTEMA;
        const viewId = tipo === 'EPIs' ? 'epis-cadastrados-view' : 'sistemas-cadastrados-view';
        const buscaId = tipo === 'EPIs' ? 'busca-epi' : 'busca-sistemas';
        
        const viewElement = getInput(viewId);
        const termoBusca = getInput(buscaId).value.toLowerCase();
        viewElement.innerHTML = '<p style="padding: 15px; text-align: center;">Carregando dados...</p>';

        try {
            const snapshot = await db.collection(arquivo).orderBy("descricao").get();
            const dados = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

            const dadosFiltrados = dados.filter(item => !termoBusca || item.descricao.toLowerCase().includes(termoBusca));
            viewElement.innerHTML = '';

            if (dadosFiltrados.length === 0) {
                viewElement.innerHTML = `<p style="padding: 15px; text-align: center;">Nenhum item encontrado.</p>`;
                return;
            }

            dadosFiltrados.forEach((item) => {
                const itemContainer = document.createElement('div');
                itemContainer.className = 'item-cadastrado';
                let bodyContent = '';
                for (const [chave, valor] of Object.entries(item)) {
                    if (chave === 'descricao' || chave === 'id') continue;
                    const chaveFormatada = (chave.charAt(0).toUpperCase() + chave.slice(1)).replace(/_/g, ' ');
                    bodyContent += `<p><strong>${chaveFormatada}:</strong> ${typeof valor === 'boolean' ? (valor ? 'Sim' : 'Não') : valor}</p>`;
                }

                itemContainer.innerHTML = `
                    <div class="item-header">
                        <h4>${item.descricao}</h4>
                        <div class="item-actions">
                             <button class="btn-notify" title="Notificar">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                            </button>
                            <button class="btn-edit" title="Editar">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                            </button>
                            <button class="btn-delete" title="Excluir">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                            </button>
                        </div>
                    </div>
                    <div class="item-body">${bodyContent}</div>
                `;

                itemContainer.querySelector('.btn-notify').addEventListener('click', () => abrirModalNotificacao(tipo, item.id));
                itemContainer.querySelector('.btn-edit').addEventListener('click', () => editarItem(tipo, item.id));
                itemContainer.querySelector('.btn-delete').addEventListener('click', () => excluirItem(tipo, item.id, item.descricao));
                viewElement.appendChild(itemContainer);
            });
        } catch (error) {
            viewElement.innerHTML = `<p style="padding: 15px; text-align: center; color: var(--cor-erro);">Erro ao carregar dados.</p>`;
            console.error("Erro ao buscar dados: ", error);
        }
    }

    async function marcarEnvioDocumentos() {
        // ... (código existente sem alterações)
    }

    function toggleDarkMode() {
        document.body.classList.toggle('dark-theme');
        localStorage.setItem('theme', document.body.classList.contains('dark-theme') ? 'dark' : 'light');
    }
    
    function showPage(pageId, element) {
        // ... (código existente sem alterações)
    }

    async function carregarNotificacoes() {
        // ... (código existente sem alterações)
    }

    async function abrirModalNotificacao(tipo, id) {
        const arquivo = tipo === 'EPIs' ? ARQUIVO_EPI : ARQUIVO_SISTEMA;
        const doc = await db.collection(arquivo).doc(id).get();
        if (!doc.exists) {
            showNotification("Item não encontrado.", "error");
            return;
        }
        itemNotificacaoAtual = doc.data();
        
        const descricao = itemNotificacaoAtual.descricao;
        const dataVencimento = tipo === 'EPIs' ? itemNotificacaoAtual.data_troca : itemNotificacaoAtual.data_proxima_manutencao;

        document.getElementById('modal-item-descricao').textContent = descricao;
        document.getElementById('modal-item-data').textContent = dataVencimento;

        document.getElementById('modal-btn-email').onclick = () => {
            const subject = `Lembrete de Vencimento: ${descricao}`;
            const details = `Lembrete para o item: ${descricao}\nData de Vencimento: ${dataVencimento}`;
            enviarConfirmacaoPorEmail(subject, details);
            fecharModalNotificacao();
        };

        document.getElementById('modal-btn-whatsapp').onclick = () => {
            enviarNotificacaoWhatsApp(descricao, dataVencimento);
            fecharModalNotificacao();
        };

        document.getElementById('notification-modal').classList.add('open');
    }

    function fecharModalNotificacao() {
        document.getElementById('notification-modal').classList.remove('open');
        itemNotificacaoAtual = null;
    }

    function enviarNotificacaoWhatsApp(descricao, dataVencimento) {
        const numero = '5598992220706'; // **TROQUE PELO NÚMERO DE DESTINO** (com código do país)
        const mensagem = `Lembrete de Vencimento:\n\nItem: *${descricao}*\nVencimento: *${dataVencimento}*`;
        const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;
        window.open(url, '_blank');
    }

    window.onload = function() {
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-theme');
        }
        document.getElementById('btn-dark-mode-toggle').addEventListener('click', toggleDarkMode);
        
        const menuButton = document.getElementById('menu-toggle-btn');
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.querySelector('.overlay');
        menuButton.addEventListener('click', () => {
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        });
        overlay.addEventListener('click', () => {
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
        });

        // Fechar modal ao clicar no overlay
        document.getElementById('notification-modal').addEventListener('click', (event) => {
            if (event.target === event.currentTarget) {
                fecharModalNotificacao();
            }
        });
    };
</script>

</body>
</html>